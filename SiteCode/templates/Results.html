{% extends "header.html" %}
{% block body %}
<div class="container-fluid text-center">
    <h3>Based on your interest in {{name}} we prescribe:</h3>
    <p></p>
    <div class="row content">
        <div class="col-sm-2 sidenav"></div>
        <div class="col-sm-8 text-left">
            <div id="results_div">
                <div class="table-responsive">
                    <table class="table table-hover" id="results_table">
                        <thead>
                        <tr>
                            <th>Artist/Band Name</th>
                            <th>Picture</th>
                            <th>Bio</th>
                            {% if session['name'] %}
                            <th>Save</th>
                            {% endif %}
                        </tr>
                        </thead>
                        <tbody>
                        {% for x in range(related|length) %}
                        <tr>
                            <td>{{related[x]['name']}}</td>
                            <td><img src="{{related[x]['picture']}}" height="200" width="200"></td>
                            <td>
                                <button type="button" class="btn btn-primary btn-lg" data-toggle="modal"
                                        data-target="#bioModal{{x}}">
                                    See Artist Bio
                                </button>
                            </td>
                            {% if session['user'] %}
                            {% if related[x]['saved'] %}
                            <td>
                                <a href="/unsave/{{related[x]['id']}}">
                                    <button type="button" class="btn btn-primary btn-lg">
                                        Saved <span class="glyphicon glyphicon-star" style="font-size:1.2em"></span>
                                    </button>
                                </a>
                            </td>
                            {% else %}
                            <td>
                                <a href="/save/{{related[x]['id']}}">
                                    <button type="button" class="btn btn-default btn-lg">
                                        Save <span class="glyphicon glyphicon-star-empty"
                                                   style="font-size:1.2em"></span>
                                    </button>
                                </a>
                            </td>
                            {% endif %}
                            {% endif %}

                        </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
                <div id="bioDiv">
                    {% for x in range(related|length) %}
                    <div class="modal fade" id="bioModal{{x}}" tabindex="-1" role="dialog">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                                            aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title">Artist Bio: {{related[x]['name']}}</h4>
                                </div>
                                <div class="modal-body">
                                    <p>{{related[x]['bio']}}</p>
                                </div>
                                <div class="modal-footer"></div>
                                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div><!-- /.modal-content -->
                    </div><!-- /.modal-dialog -->
                    {% endfor %}
                </div><!-- /.modal -->
            </div>
        </div>
    </div>
</div>

{% endblock %}